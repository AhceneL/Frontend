<div class="dashboard-container">
  <!-- Sidebar avec profil utilisateur -->
  <div class="sidebar">
    <div class="profile">
      <img src="assets/avatar.png" alt="Avatar Membre" class="avatar" />
      <p class="username">{{ membreData?.nom }}</p>
      <span class="role">Membre</span>
      <button class="profile-button" (click)="goToProfil()">Gérer le Profil</button>
    </div>
  </div>

  <!-- Section principale avec les projets -->
  <div class="projects-section">
    <h2>Projets :</h2>

    <!-- Liste des projets -->
    <div class="projects-list" *ngIf="projets && projets.length > 0; else aucunProjet">
      <div
        class="project-card"
        *ngFor="let projet of projets"
        [ngClass]="{
          'completed': getStatutProjetPourMembre(projet.taches || []) === 'Terminé',
          'in-progress': getStatutProjetPourMembre(projet.taches || []) === 'En cours',
          'not-started': getStatutProjetPourMembre(projet.taches || []) === 'Pas commencé'
        }"
      >
        <p class="project-name">{{ projet.nom }}</p>
        <span class="project-description">{{ projet.description || 'Résumé du projet.' }}</span>

        <p class="project-status">
          Statut :
          <span
            class="status-label"
            [ngClass]="{
              'completed': getStatutProjetPourMembre(projet.taches || []) === 'Terminé',
              'in-progress': getStatutProjetPourMembre(projet.taches || []) === 'En cours',
              'not-started': getStatutProjetPourMembre(projet.taches || []) === 'Pas commencé'
            }"
          >
            {{ getStatutProjetPourMembre(projet.taches || []) }}
          </span>
        </p>

        <p class="task-count">
          Nombre de tâches : {{ projet.taches?.length || 0 }}
        </p>

        <button class="detail-button" (click)="goToDetailProjet(projet.nom)">Voir Détails</button>
      </div>
    </div>

    <!-- Si aucun projet -->
    <ng-template #aucunProjet>
      <p class="no-project-message">Aucun projet disponible pour ce membre.</p>
    </ng-template>
  </div>

  <!-- Bouton de déconnexion -->
  <button class="logout-button" (click)="logout()">Se Déconnecter</button>
</div>
